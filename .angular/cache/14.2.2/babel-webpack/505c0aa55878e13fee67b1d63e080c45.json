{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport { map, startWith } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/curso.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/autocomplete\";\nimport * as i5 from \"@angular/material/core\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"../curso-details/curso-details.component\";\n\nfunction CursoListComponent_mat_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r3, \" \");\n  }\n}\n\nfunction CursoListComponent_li_13_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const curso_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", curso_r4.tema.nombre, \") \");\n  }\n}\n\nfunction CursoListComponent_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 13);\n    i0.ɵɵlistener(\"click\", function CursoListComponent_li_13_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const curso_r4 = restoredCtx.$implicit;\n      const i_r5 = restoredCtx.index;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.setActiveElement(curso_r4, i_r5));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, CursoListComponent_li_13_div_2_Template, 2, 1, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const curso_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", i_r5 == ctx_r2.currentIndex);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", curso_r4.nombre, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", curso_r4.tema);\n  }\n}\n\nexport class CursoListComponent {\n  constructor(cursoService) {\n    this.cursoService = cursoService;\n    this.currentElement = {};\n    this.currentIndex = -1;\n    this.title = '';\n    this.myControl = new FormControl();\n    this.options = ['Curso 1', 'Curso 2', 'Curso 3']; // Reemplaza esto con tus cursos\n  }\n\n  ngOnInit() {\n    this.retrieveCursos();\n    this.filteredOptions = this.myControl.valueChanges.pipe(startWith(''), map(value => this._filter(value)));\n  }\n\n  _filter(value) {\n    const filterValue = value.toLowerCase();\n    return this.options.filter(option => option.toLowerCase().includes(filterValue));\n  }\n\n  retrieveCursos() {\n    this.cursoService.getAll().subscribe({\n      next: data => {\n        this.cursos = data;\n        console.log(this.cursos);\n      },\n      error: e => console.error(e)\n    });\n  }\n\n  refreshList() {\n    this.retrieveCursos();\n    this.currentElement = {};\n    this.currentIndex = -1;\n  }\n\n  setActiveElement(element, index) {\n    this.currentElement = element;\n    this.currentIndex = index;\n  }\n\n  removeAllElements() {\n    this.cursoService.deleteAll().subscribe({\n      next: res => {\n        console.log(res);\n        this.refreshList();\n      },\n      error: e => console.error(e)\n    });\n  }\n\n  searchTitle() {\n    this.currentElement = {};\n    this.currentIndex = -1; // Busca el título en las opciones de autocompletado\n\n    if (this.options.includes(this.title)) {\n      this.cursoService.findByTitle(this.title).subscribe({\n        next: data => {\n          this.currentElement = data;\n          console.log(data);\n        },\n        error: e => console.error(e)\n      });\n    }\n  }\n\n}\n\nCursoListComponent.ɵfac = function CursoListComponent_Factory(t) {\n  return new (t || CursoListComponent)(i0.ɵɵdirectiveInject(i1.CursoService));\n};\n\nCursoListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CursoListComponent,\n  selectors: [[\"app-curso-list\"]],\n  decls: 18,\n  vars: 8,\n  consts: [[1, \"list\", \"row\"], [1, \"col-md-8\"], [1, \"input-group\", \"mb-3\"], [1, \"example-full-width\"], [\"type\", \"text\", \"placeholder\", \"Buscar por t\\u00EDtulo\", \"aria-label\", \"Number\", \"matInput\", \"\", 3, \"formControl\", \"matAutocomplete\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-6\"], [1, \"list-group\"], [\"class\", \"list-group-item\", 3, \"active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"disabled\", \"\", 1, \"m-3\", \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"], [3, \"viewMode\", \"currentElement\"], [3, \"value\"], [1, \"list-group-item\", 3, \"click\"], [4, \"ngIf\"]],\n  template: function CursoListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"mat-form-field\", 3);\n      i0.ɵɵelement(4, \"input\", 4);\n      i0.ɵɵelementStart(5, \"mat-autocomplete\", null, 5);\n      i0.ɵɵtemplate(7, CursoListComponent_mat_option_7_Template, 2, 2, \"mat-option\", 6);\n      i0.ɵɵpipe(8, \"async\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(9, \"div\", 7)(10, \"h4\");\n      i0.ɵɵtext(11, \"Listado Cursos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"ul\", 8);\n      i0.ɵɵtemplate(13, CursoListComponent_li_13_Template, 3, 4, \"li\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function CursoListComponent_Template_button_click_14_listener() {\n        return ctx.removeAllElements();\n      });\n      i0.ɵɵtext(15, \" Remove All \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 7);\n      i0.ɵɵelement(17, \"app-curso-details\", 11);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(6);\n\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formControl\", ctx.myControl)(\"matAutocomplete\", _r0);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(8, 6, ctx.filteredOptions));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.cursos);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"viewMode\", true)(\"currentElement\", ctx.currentElement);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i4.MatAutocomplete, i5.MatOption, i4.MatAutocompleteTrigger, i6.MatFormField, i7.MatInput, i3.FormControlDirective, i8.CursoDetailsComponent, i2.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjdXJzby1saXN0LmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","map","startWith","i0","CursoListComponent","constructor","cursoService","ngOnInit","retrieveCursos","filteredOptions","myControl","valueChanges","pipe","value","_filter","filterValue","toLowerCase","options","filter","option","includes","getAll","subscribe","next","data","cursos","console","log","error","e","refreshList","currentElement","currentIndex","setActiveElement","element","index","removeAllElements","deleteAll","res","searchTitle","title","findByTitle","selectors","decls","vars","consts","template","ctx","_r0"],"sourceRoot":"","sources":["C:\\Users\\Tomas Ferreyra\\git\\ngDDS2023\\src\\app\\components\\curso-list\\curso-list.component.ts","C:\\Users\\Tomas Ferreyra\\git\\ngDDS2023\\src\\app\\components\\curso-list\\curso-list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Curso } from 'src/app/models/curso.model';\r\nimport { CursoService } from 'src/app/services/curso.service';\r\nimport { FormControl } from '@angular/forms';\r\nimport { Observable } from 'rxjs';\r\nimport { map, startWith } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-curso-list',\r\n  templateUrl: './curso-list.component.html',\r\n  styleUrls: ['./curso-list.component.css']\r\n})\r\nexport class CursoListComponent implements OnInit {\r\n  cursos?: Curso[];\r\n  currentElement: Curso = {};\r\n  currentIndex = -1;\r\n  title = '';\r\n\r\n  myControl = new FormControl();\r\n  options: string[] = ['Curso 1', 'Curso 2', 'Curso 3']; // Reemplaza esto con tus cursos\r\n  filteredOptions: Observable<string[]>;\r\n\r\n  constructor(private cursoService: CursoService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.retrieveCursos();\r\n    this.filteredOptions = this.myControl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filter(value))\r\n    );\r\n  }\r\n\r\n  private _filter(value: string): string[] {\r\n    const filterValue = value.toLowerCase();\r\n    return this.options.filter(option => option.toLowerCase().includes(filterValue));\r\n  }\r\n  \r\n  retrieveCursos(): void {\r\n    this.cursoService.getAll()\r\n      .subscribe({\r\n        next: (data) => {\r\n          this.cursos = data;\r\n          console.log(this.cursos);\r\n        },\r\n        error: (e) => console.error(e)\r\n      });\r\n  }\r\n  \r\n  refreshList(): void {\r\n    this.retrieveCursos();\r\n    this.currentElement = {};\r\n    this.currentIndex = -1;\r\n  }\r\n  \r\n  setActiveElement(element: Curso, index: number): void {\r\n    this.currentElement = element;\r\n    this.currentIndex = index;\r\n  }\r\n  \r\n  removeAllElements(): void {\r\n    this.cursoService.deleteAll()\r\n      .subscribe({\r\n        next: (res) => {\r\n          console.log(res);\r\n          this.refreshList();\r\n        },\r\n        error: (e) => console.error(e)\r\n      });\r\n  }\r\n  \r\n  searchTitle(): void {\r\n    this.currentElement = <Curso>{};\r\n    this.currentIndex = -1;\r\n    \r\n    // Busca el título en las opciones de autocompletado\r\n    if (this.options.includes(this.title)) {\r\n      this.cursoService.findByTitle(this.title)\r\n        .subscribe({\r\n          next: (data) => {\r\n            this.currentElement = data;\r\n            console.log(data);\r\n          },\r\n          error: (e) => console.error(e)\r\n        });\r\n    }\r\n  }\r\n}\r\n","<div class=\"list row\">\r\n  <div class=\"col-md-8\">\r\n    <div class=\"input-group mb-3\">\r\n      <mat-form-field class=\"example-full-width\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Buscar por título\"\r\n          aria-label=\"Number\"\r\n          matInput\r\n          [formControl]=\"myControl\"\r\n          [matAutocomplete]=\"auto\"\r\n        >\r\n        <mat-autocomplete #auto=\"matAutocomplete\">\r\n          <mat-option *ngFor=\"let option of filteredOptions | async\" [value]=\"option\">\r\n            {{option}}\r\n          </mat-option>\r\n        </mat-autocomplete>\r\n      </mat-form-field>\r\n    </div>\r\n  </div>\r\n  <div class=\"col-md-6\">\r\n    <h4>Listado Cursos</h4>\r\n    <ul class=\"list-group\">\r\n      <li\r\n        class=\"list-group-item\"\r\n        *ngFor=\"let curso of cursos; let i = index\"\r\n        [class.active]=\"i == currentIndex\"\r\n        (click)=\"setActiveElement(curso, i)\"\r\n      >\r\n        {{ curso.nombre }} \r\n        <div *ngIf=\"curso.tema\">\r\n        \t({{ curso.tema.nombre }})\r\n        </div> \r\n      </li>\r\n    </ul>\r\n    <button class=\"m-3 btn btn-sm btn-danger\" disabled (click)=\"removeAllElements()\">\r\n      Remove All\r\n    </button>\r\n  </div>\r\n<div class=\"col-md-6\">\r\n  <app-curso-details\r\n  [viewMode]=\"true\"\r\n  [currentElement]=\"currentElement\"\r\n></app-curso-details>\r\n</div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module"}